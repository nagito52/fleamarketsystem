<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>届いた評価一覧 - フリマアプリ</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700;800&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
	<link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
	<!-- Navbar -->
	<nav class="navbar">
		<a th:href="@{/items}" class="navbar-brand">
			<i class="fas fa-store"></i> フリマアプリ
		</a>
		<div class="navbar-nav">
			<a th:href="@{/items}"><i class="fas fa-shopping-bag"></i> 商品一覧</a>
			<a th:href="@{/my_page}"><i class="fas fa-user-circle"></i> マイページ</a>
		</div>
	</nav>

	<div class="container">
		<a th:href="@{/my_page}" class="back-link">
			<i class="fas fa-arrow-left"></i> マイページに戻る
		</a>

		<div class="page-header">
			<h1><i class="fas fa-comment-dots" style="color: var(--accent-dark);"></i> <span th:text="${title}">届いた評価一覧</span></h1>
		</div>

		<!-- Empty State -->
		<div th:if="${#lists.isEmpty(reviews)}" class="empty-state">
			<i class="fas fa-star" style="display:block;"></i>
			<p>まだ評価はありません。</p>
		</div>

		<!-- Review List -->
		<div class="card" th:if="${!#lists.isEmpty(reviews)}">
			<div th:each="review : ${reviews}" class="review-item">
				<div class="review-header">
					<strong>
						<i class="fas fa-user-circle" style="color: var(--primary);"></i>
						<span th:text="${review.reviewer.name} + ' さんからの評価'"></span>
					</strong>
					<span class="review-date" th:text="${#temporals.format(review.createdAt, 'yyyy/MM/dd HH:mm')}"></span>
				</div>

				<div class="stars" style="margin: 6px 0;">
					<span th:each="i : ${#numbers.sequence(1, 5)}">
						<i th:if="${i <= review.rating}" class="fas fa-star"></i>
						<i th:if="${i > review.rating}" class="far fa-star empty"></i>
					</span>
				</div>

				<p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 4px;">
					<i class="fas fa-tag"></i> 対象商品: <span th:text="${review.item.name}"></span>
				</p>

				<p th:if="${review.comment}" th:text="${review.comment}" style="margin-top: 8px;"></p>
			</div>
		</div>
	</div>

	<script th:src="@{/js/app.js}"></script>
</body>
</html>
